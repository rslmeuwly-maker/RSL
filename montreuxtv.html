<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Montreux Scooter Time Machine</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
/* ===== FOND VIDÃ‰O ===== */
#bgVideo{
  position:fixed; inset:0;
  width:100vw;height:100vh;
  object-fit:cover;
  z-index:-2;
  opacity:.55;
  filter:blur(2px) brightness(.60) contrast(1.10);
}
body::before{
  content:"";position:fixed;inset:0;
  background:#00000090;z-index:-1;
}
body{
  margin:0;height:100vh;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  color:#00ff93;font-family:Arial;text-align:center;
}

/* ===== TITRE ===== */
h1{
  margin-bottom:6px;font-size:32px;
  letter-spacing:1.5px;
  text-shadow:0 0 35px #00ffaf,0 0 15px #00ffaf;
}
#subtext{
  font-size:17px;opacity:.88;margin-bottom:14px;
  text-shadow:0 0 12px #00ffaf99;
}

/* ===== LIGNE : BLOC GAUCHE + CADRE VERT ===== */
.frame-row{
  display:flex;
  align-items:center;
  gap:16px;
}

/* ===== PETIT BLOC Ã€ GAUCHE, Ã€ Lâ€™EXTÃ‰RIEUR DU CADRE VERT ===== */
#sideInfo{
  width:230px;
  background:#000000dd;
  border:2px solid #00ffaf;
  border-radius:12px;
  padding:10px 10px 12px;
  font-size:.8rem;
  line-height:1.25;
  text-align:left;
  box-shadow:0 0 18px #00ffaf77;
  display:none;           /* affichÃ© toutes les 10 min */
}
#sideInfo img{
  width:100%;
  border-radius:8px;
  margin-bottom:6px;
  box-shadow:0 0 10px #00ffaf55;
}

/* ===== CADRE VIDÃ‰O (VERT) ===== */
.area{
  width:95vw;max-width:1350px;aspect-ratio:16/9;
  border-radius:18px;border:4px solid #00ffaf;background:#000;
  overflow:hidden;
  box-shadow:0 0 45px #00ffea, inset 0 0 28px #00ffc3;
  position:relative;
}

/* ===== PLAYER PLEIN CADRE ===== */
#player{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
}
#player iframe{
  width:100%;
  height:100%;
  object-fit:contain;   /* on respecte la vidÃ©o, pas de zoom dÃ©gueu */
  object-position:center;
  background:#000;
}

/* ===== INTRO (UNE SEULE FOIS AU DÃ‰BUT, PAR-DESSUS LA VIDÃ‰O) ===== */
#introLayer{
  position:absolute;inset:0;padding:24px;
  background:radial-gradient(circle,#000000dd,#000000b0,#00000080);
  display:flex;align-items:center;justify-content:space-between;
  color:#00ff93;z-index:3;
}
#introText{
  width:55%;font-size:1rem;line-height:1.4;text-align:left;
  text-shadow:0 0 15px #00ffaf;
}
#introFlyer{
  width:35%;object-fit:contain;max-height:80%;
  border-radius:10px;box-shadow:0 0 25px #00ffafaa;
}

/* ===== SECTION PUB ENTRE LES VIDÃ‰OS ===== */
#adScreen{
  display:none;gap:14px;padding:14px;
}
.flyer{
  width:50%;object-fit:contain;height:100%;
}

/* ===== QR (on ne touche plus) ===== */
#qrFixed{
  position:fixed;right:14px;bottom:14px;
  width:180px;z-index:10;
}
#qrFixedLabel{
  position:fixed;right:210px;bottom:60px;
  font-size:1rem;color:#00ff93;
  background:#000000dd;padding:6px 12px;border-radius:6px;
  text-shadow:0 0 8px #00ffaf;z-index:10;
}

/* ===== BOUTON START ===== */
#startBtn{
  margin-top:18px;padding:14px 34px;font-size:21px;font-weight:bold;
  background:#00ffaf;color:#000;border:none;border-radius:8px;
  cursor:pointer;box-shadow:0 0 28px #00ffaf;transition:.2s;
}
#startBtn:hover{
  transform:scale(1.08);box-shadow:0 0 50px #00ffe1;
}
</style>
</head>
<body>

<!-- FOND VIDÃ‰O -->
<video id="bgVideo" autoplay loop muted playsinline>
  <source src="https://jynxifufaauoxwzjapzq.supabase.co/storage/v1/object/public/videos_rsl/trottvideo2.mp4">
</video>

<h1>Montreux Scooter Time Machine</h1>
<div id="subtext">ðŸ“¼ 2005 â†’ 2025 â€¢ 20 ans de trottinette freestyle ðŸ”¥</div>

<!-- LIGNE : BLOC GAUCHE + CADRE VERT -->
<div class="frame-row">

  <!-- ðŸŸ© PETIT BLOC Ã€ GAUCHE, Ã€ Lâ€™EXTÃ‰RIEUR DU CADRE -->
  <div id="sideInfo">
    <img src="https://jynxifufaauoxwzjapzq.supabase.co/storage/v1/object/public/Flyes%20mtx%20histoire/2005.png" alt="Montreux 2005">
    ðŸ›´ Montreux â€” lÃ  oÃ¹ tout a commencÃ©.<br><br>
    Avant YouTube, avant les decks forgÃ©s, avant les gros tricksâ€¦<br>
    Avril 2005 : le premier Scooter Contest connu en Suisse, au bord du lac.<br><br>
    Montreux â€“ 2005 â†’ 2025.<br>
    20 ans de ride. 20 ans dâ€™histoire.
  </div>

  <!-- ðŸŽ¥ CADRE VERT AVEC PLAYER -->
  <div id="screen" class="area">

    <!-- INTRO (UNE SEULE FOIS AU DÃ‰BUT, PAR-DESSUS LA VIDÃ‰O) -->
    <div id="introLayer">
      <div id="introText">
        ðŸ›´ Montreux â€” lÃ  oÃ¹ tout a commencÃ©.<br><br>
        Avant YouTube, avant les decks en aluminium forgÃ©, avant les tricks de folie quâ€™on voit aujourdâ€™huiâ€¦<br>
        il y a eu Montreux, avril 2005.<br><br>

        Le tout premier Scooter Contest connu, en Suisse, au bord du lac, dans un skatepark qui allait marquer lâ€™histoire.<br>
        Pas de camÃ©ras 4K, pas de rÃ©seaux sociaux pour immortaliser le moment.<br>
        Juste des passionnÃ©s, du rap, des riders motivÃ©s, des figures improvisÃ©es
        et une seule certitude :<br><br>

        Câ€™Ã©tait le dÃ©but. Le point de dÃ©part dâ€™une culture mondiale.<br><br>

        Aujourdâ€™hui, le scooter freestyle remplit des skateparks partout dans le monde,
        les tricks volent plus haut, les riders vont plus loin,
        mais lâ€™ADN reste le mÃªme : libertÃ©, crÃ©ativitÃ©, famille.<br><br>

        Et tout Ã§aâ€¦ est nÃ© ici.<br><br>

        Montreux â€“ 2005 â†’ 2025.<br>
        20 ans de ride. 20 ans dâ€™histoire.
      </div>

      <img id="introFlyer"
           src="https://jynxifufaauoxwzjapzq.supabase.co/storage/v1/object/public/Flyes%20mtx%20histoire/2005.png"
           alt="Flyer Montreux 2005">
    </div>

    <div id="player"></div>
  </div>
</div>

<!-- PUB ENTRE LES VIDÃ‰OS -->
<div id="adScreen" class="area">
  <img src="https://jynxifufaauoxwzjapzq.supabase.co/storage/v1/object/public/Flyers%20RSL/Flyer_Montreux_Scooter_Contest_A3.pdf%20(1240%20x%201748%20px).png" class="flyer">
  <img src="https://jynxifufaauoxwzjapzq.supabase.co/storage/v1/object/public/Flyers%20RSL/Copie%20de%20Flyer_Montreux_Scooter_Contest_A3.pdf%20(1240%20x%201748%20px).png" class="flyer">
</div>

<button id="startBtn">â–¶ Lancer</button>

<!-- QR FIXE -->
<img id="qrFixed" src="https://jynxifufaauoxwzjapzq.supabase.co/storage/v1/object/public/contest_photos_2025/qr_access_photos.png" alt="QR photos event">
<div id="qrFixedLabel">ðŸ“¸ Photos ici â†’</div>

<!-- SCRIPTS -->
<script>
const V = [
  "w5j7cIC7IVk","ByhXJUUjV1U","BWRR-rKD46c","v0D2qziOqjQ","H48vxTdkrNc","V_IrrBfwUR0",
  "jpnapT5UdrA","zwV63b2DGbM","JNtj5nPOghs","RLwUh3C59LM","xVZcGVUEU3M","v1qPdsOCDRw",
  "PjrFJI5AZZA","ZiE4_CRrIfA","tSo7db52dDk","P6lj1FyPV3w","5INog8467bM","xF3zFSwHrlI","0z0Ly25eSdY"
];

let index = 0;
let player = null;
let ytReady = false;
let introShownOnce = false;

const INTRO_DURATION = 10000;  // 10 s
const AD_DURATION    = 20000;  // 20 s
const sideInfo       = document.getElementById("sideInfo");
const introLayer     = document.getElementById("introLayer");
const screen         = document.getElementById("screen");
const ads            = document.getElementById("adScreen");

/* AppelÃ© par l'API YouTube quand elle est prÃªte */
function onYouTubeIframeAPIReady(){
  ytReady = true;
}

/* Bouton LANCER */
document.getElementById("startBtn").onclick = () => {
  if (!introShownOnce){
    introShownOnce = true;
    introLayer.style.display = "flex";
    setTimeout(() => {
      introLayer.style.display = "none";
      startVideo();
    }, INTRO_DURATION);
  } else {
    startVideo();
  }
};

function startVideo(){
  if (!ytReady){
    setTimeout(startVideo, 200);
    return;
  }
  if (!player){
    player = new YT.Player("player",{
      videoId: V[index],
      playerVars:{autoplay:1,controls:1,rel:0,modestbranding:1},
      events:{onStateChange:onPlayerStateChange}
    });
  } else {
    player.loadVideoById(V[index]);
  }
}

function onPlayerStateChange(e){
  if (e.data === YT.PlayerState.ENDED){
    // pub entre les vidÃ©os
    screen.style.display = "none";
    ads.style.display    = "flex";
    setTimeout(() => {
      ads.style.display    = "none";
      screen.style.display = "block";
      nextVideo();
    }, AD_DURATION);
  }
}

function nextVideo(){
  index = (index + 1) % V.length;
  startVideo();
}

/* â± BLOC GAUCHE TOUTES LES 10 MINUTES (10s) */
setInterval(() => {
  sideInfo.style.display = "block";
  setTimeout(() => {
    sideInfo.style.display = "none";
  }, 10000);
}, 600000); // 600 000 ms = 10 minutes
</script>

<script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
