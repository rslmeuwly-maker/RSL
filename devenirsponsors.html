<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>RSL ‚Äî Devenir partenaire</title>

  <!-- Fonts + styles globaux -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/common.css"/>

  <!-- Supabase + scripts (comme tes pages) -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script defer src="js/env.js"></script>
  <script defer src="js/auth.js"></script>
  <script defer src="js/site.js"></script>

  <style>
    :root{
      --rsl-bg:#020617;
      --rsl-fg:#e5e7eb;
      --rsl-muted:#9ca3af;
      --rsl-card:rgba(15,23,42,.96);
      --rsl-card-soft:rgba(15,23,42,.9);
      --rsl-border:rgba(148,163,184,.45);
      --rsl-accent:#22c55e;
      --rsl-accent-soft:rgba(34,197,94,.14);
      --shadow:0 16px 40px rgba(2,6,23,.45);
    }

    body.theme-light{
      --rsl-bg:#f3f4f6;
      --rsl-fg:#0f172a;
      --rsl-muted:#6b7280;
      --rsl-card:#ffffff;
      --rsl-card-soft:#f9fafb;
      --rsl-border:rgba(148,163,184,.35);
      --rsl-accent:#16a34a;
      --rsl-accent-soft:rgba(22,163,74,.12);
    }

    *,:before,:after{ box-sizing:border-box; }
    html,body{
      height:100%;
      margin:0;
      background:transparent!important;
      display:flex;
      flex-direction:column;
      color:var(--rsl-fg);
      font-family:"Outfit",system-ui,-apple-system,Segoe UI,Roboto,Arial;
      overflow-x:hidden;
    }
    main{ flex:1; }

    /* ======= Fond vid√©o ======= */
    .site-bg-video{
      position:fixed; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      z-index:-2;
      background:#000;
      pointer-events:none;
    }
    .site-bg-dim{
      position:fixed; inset:0;
      z-index:-1;
      background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,.92));
      transition:background .25s ease;
      pointer-events:none;
    }
    body.theme-light .site-bg-dim{
      background:linear-gradient(180deg,rgba(249,250,251,.9),rgba(15,23,42,.85));
    }

    /* ======= BAR TOP SIMPLE (pas de menu) ======= */
    .topbar{
      position:sticky; top:0; z-index:50;
      background:rgba(0,0,0,.55);
      backdrop-filter:blur(10px);
      border-bottom:1px solid rgba(15,23,42,.75);
    }
    body.theme-light .topbar{
      background:rgba(248,250,252,.95);
      border-bottom:1px solid rgba(148,163,184,.5);
      box-shadow:0 10px 30px rgba(15,23,42,.06);
    }
    .topbar .inner{
      max-width:1200px;
      margin:0 auto;
      padding:10px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      text-decoration:none; color:inherit;
    }
    .brand img{
      height:38px; border-radius:10px;
      background:#fff; padding:3px;
      box-shadow:0 10px 28px rgba(0,0,0,.35);
      display:block;
    }
    .brand span{
      font-weight:900;
      letter-spacing:.2px;
      font-size:15px;
      white-space:nowrap;
    }
    .actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

    .btn{
      border-radius:999px;
      padding:9px 14px;
      font-size:14px;
      font-weight:800;
      border:1px solid rgba(148,163,184,.5);
      text-decoration:none;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:rgba(15,23,42,.9);
      color:#f9fafb;
      transition:.2s ease;
      line-height:1;
      white-space:nowrap;
    }
    body.theme-light .btn{
      background:#0f172a;
      color:#f9fafb;
      border-color:#0f172a;
    }
    .btn.green{
      background:var(--rsl-accent);
      color:#052e16;
      border-color:transparent;
      box-shadow:0 10px 26px rgba(22,163,74,.45);
    }
    .btn:hover{ transform:translateY(-1px); filter:brightness(1.05); }

    .theme-toggle{
      border-radius:999px;
      border:1px solid rgba(148,163,184,.6);
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
      width:38px; height:38px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size:18px;
      cursor:pointer;
      padding:0;
      transition:.2s ease;
      line-height:1;
    }
    body.theme-light .theme-toggle{
      background:#ffffff;
      color:#0f172a;
      border-color:rgba(148,163,184,.7);
    }

    /* ===== PAGE CONTENT ===== */
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:26px 16px 60px;
    }

    .hero{
      padding:18px 16px;
      border-radius:18px;
      background:linear-gradient(180deg, rgba(30,64,175,.22), rgba(15,23,42,.92));
      border:1px solid rgba(59,130,246,.25);
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
    }
    body.theme-light .hero{
      background:linear-gradient(180deg, rgba(30,64,175,.14), rgba(255,255,255,.92));
    }

    .hero:before{
      content:"";
      position:absolute; inset:-45% -30%;
      background:
        radial-gradient(circle at 20% 25%, rgba(34,197,94,.18), transparent 55%),
        radial-gradient(circle at 85% 20%, rgba(99,102,241,.10), transparent 60%);
      pointer-events:none;
      z-index:0;
    }

    .hero-grid{
      position:relative; z-index:1;
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:14px;
      align-items:stretch;
    }
    @media (max-width: 900px){
      .hero-grid{ grid-template-columns:1fr; }
    }
    .hero h1{
      margin:0 0 6px;
      font-size:clamp(22px,3.6vw,30px);
      color:#f1f5f9;
      font-weight:900;
      letter-spacing:.01em;
    }
    body.theme-light .hero h1{ color:#0f172a; }

    .hero .lead{
      margin:0;
      font-size:14px;
      color:var(--rsl-muted);
      max-width:75ch;
      line-height:1.65;
    }

    .pill{
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.45);
      background:rgba(15,23,42,.9);
      font-size:11px;
      color:var(--rsl-fg);
      margin-right:6px;
      white-space:nowrap;
      margin-top:8px;
    }
    body.theme-light .pill{ background:#ffffff; color:#0f172a; }

    .mini{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
    }
    .mini-card{
      background:rgba(15,23,42,.78);
      border:1px solid var(--rsl-border);
      border-radius:16px;
      padding:12px 12px;
    }
    body.theme-light .mini-card{ background:#ffffff; }
    .mini-card strong{
      display:block;
      color:#f1f5f9;
      font-size:13px;
      margin-bottom:4px;
    }
    body.theme-light .mini-card strong{ color:#0f172a; }
    .mini-card span{ color:var(--rsl-muted); font-size:13px; }

    /* Blocks */
    section.block{
      margin-top:14px;
      padding:16px 14px;
      border-radius:18px;
      border:1px solid var(--rsl-border);
      background:var(--rsl-card-soft);
      box-shadow:0 14px 34px rgba(2,6,23,.35);
    }
    body.theme-light section.block{
      box-shadow:0 18px 44px rgba(15,23,42,.12);
    }
    .block h2{
      margin:0 0 8px;
      font-size:18px;
      color:#f1f5f9;
      font-weight:900;
    }
    body.theme-light .block h2{ color:#0f172a; }
    .block p{
      margin:0;
      font-size:14px;
      color:var(--rsl-muted);
      line-height:1.65;
    }

    .grid3{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
      margin-top:12px;
    }
    @media (max-width: 900px){ .grid3{ grid-template-columns:1fr; } }

    .card{
      background:rgba(15,23,42,.92);
      border:1px solid var(--rsl-border);
      border-radius:18px;
      padding:14px 14px;
      min-height:140px;
    }
    body.theme-light .card{ background:#ffffff; }
    .card h3{
      margin:0 0 8px;
      font-size:15px;
      color:#f1f5f9;
      font-weight:900;
    }
    body.theme-light .card h3{ color:#0f172a; }
    .card ul{
      margin:0;
      padding-left:18px;
      color:var(--rsl-muted);
      font-size:13px;
      line-height:1.55;
    }

    /* Packs */
    .packs-top{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:12px;
      flex-wrap:wrap;
      margin-top:10px;
    }

    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .select, .toggle{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(148,163,184,.35);
      background:rgba(15,23,42,.95);
      color:var(--rsl-fg);
      font-weight:800;
      font-size:13px;
    }
    body.theme-light .select, body.theme-light .toggle{
      background:#ffffff;
      color:#0f172a;
    }
    .select select{
      border:0; outline:none;
      background:transparent;
      color:inherit;
      font-weight:900;
      font-size:13px;
      cursor:pointer;
    }
    .toggle input{ width:18px; height:18px; cursor:pointer; }

    .offers{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
      margin-top:12px;
    }
    @media (max-width: 900px){ .offers{ grid-template-columns:1fr; } }

    .offer-card{
      background:rgba(15,23,42,.92);
      border:1px solid rgba(148,163,184,.35);
      border-radius:18px;
      padding:14px;
      position:relative;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:220px;
    }
    body.theme-light .offer-card{ background:#ffffff; }

    .offer-card.featured{
      border-color: rgba(34,197,94,.5);
      box-shadow:0 18px 40px rgba(2,6,23,.45);
    }

    .tag{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:3px 10px;
      border-radius:999px;
      font-size:11px;
      border:1px solid rgba(148,163,184,.45);
      color:var(--rsl-fg);
      background:rgba(2,6,23,.25);
      width:max-content;
      font-weight:900;
    }
    body.theme-light .tag{ color:#0f172a; background:rgba(15,23,42,.06); }

    .offer-card h4{
      margin:10px 0 6px;
      font-size:16px;
      color:#f1f5f9;
      font-weight:900;
    }
    body.theme-light .offer-card h4{ color:#0f172a; }

    .price{
      margin:0 0 10px;
      font-weight:900;
      font-size:18px;
      color:#bbf7d0;
      line-height:1.2;
    }
    body.theme-light .price{ color:#0f172a; }
    .price small{
      display:block;
      font-size:12px;
      color:var(--rsl-muted);
      font-weight:800;
      margin-top:4px;
    }

    .offer-card ul{
      margin:0;
      padding-left:18px;
      color:var(--rsl-muted);
      font-size:13px;
      line-height:1.55;
      flex:1;
    }

    /* QR TWINT */
    .twint{
      display:grid;
      grid-template-columns: minmax(0,1.1fr) minmax(0,.9fr);
      gap:12px;
      align-items:center;
      margin-top:12px;
    }
    @media (max-width: 900px){ .twint{ grid-template-columns:1fr; } }

    .qr-box{
      border:1px solid rgba(148,163,184,.35);
      background:rgba(15,23,42,.92);
      border-radius:18px;
      padding:14px;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:240px;
    }
    body.theme-light .qr-box{ background:#ffffff; }

    .qr-box img{
      max-width:100%;
      max-height:320px;
      object-fit:contain;
      border-radius:12px;
    }

    .qr-note{
      border:1px solid rgba(148,163,184,.35);
      background:rgba(15,23,42,.92);
      border-radius:18px;
      padding:14px;
    }
    body.theme-light .qr-note{ background:#ffffff; }
    .qr-note h3{
      margin:0 0 6px;
      font-size:15px;
      font-weight:900;
      color:#f1f5f9;
    }
    body.theme-light .qr-note h3{ color:#0f172a; }
    .qr-note p{ margin:0; color:var(--rsl-muted); font-size:13px; line-height:1.6; }
    .qr-actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }

    .don-badge{
      margin-top:10px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(34,197,94,.35);
      background:rgba(34,197,94,.10);
      color:#bbf7d0;
      font-weight:900;
      font-size:13px;
      line-height:1.45;
    }
    body.theme-light .don-badge{
      color:#0f172a;
      background:rgba(22,163,74,.10);
      border-color:rgba(22,163,74,.25);
    }

    /* FORM */
    form{
      margin-top:12px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 900px){ form{ grid-template-columns:1fr; } }

    .field{
      display:flex;
      flex-direction:column;
      gap:5px;
    }
    label{
      font-size:12px;
      color:#cbd5e1;
      font-weight:800;
    }
    body.theme-light label{ color:#334155; }

    input, textarea, select{
      padding:10px 10px;
      border-radius:12px;
      border:1px solid rgba(148,163,184,.35);
      background:rgba(15,23,42,.95);
      color:var(--rsl-fg);
      font-size:14px;
      outline:none;
    }
    body.theme-light input, body.theme-light textarea, body.theme-light select{
      background:#ffffff;
      color:#0f172a;
    }
    textarea{ min-height:120px; resize:vertical; }
    .full{ grid-column:1 / -1; }

    .actions-row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:space-between;
    }

    .btn-primary{
      background:var(--rsl-accent);
      color:#052e16;
      border:0;
      padding:11px 16px;
      border-radius:999px;
      font-weight:900;
      cursor:pointer;
      font-size:14px;
      box-shadow:0 10px 26px rgba(22,163,74,.45);
    }
    .btn-primary:hover{ filter:brightness(1.03); transform:translateY(-1px); }
    .hint{
      color:var(--rsl-muted);
      font-size:13px;
      font-weight:700;
    }

    /* toast */
    .toast{
      margin-top:12px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(148,163,184,.35);
      background:rgba(15,23,42,.9);
      color:var(--rsl-fg);
      font-size:13px;
      display:none;
    }
    .toast.ok{
      border-color:rgba(34,197,94,.55);
      color:#bbf7d0;
      background:rgba(22,163,74,.12);
    }
    .toast.err{
      border-color:rgba(248,113,113,.65);
      color:#fecaca;
      background:rgba(127,29,29,.22);
    }

    /* footer */
    .footer{
      text-align:center;
      color:var(--rsl-muted);
      font-size:13px;
      padding:20px 0 26px;
      margin:0;
      border-top:1px solid rgba(15,23,42,.7);
      background:rgba(15,23,42,.85);
    }
    body.theme-light .footer{
      background:rgba(248,250,252,.96);
      border-top-color:rgba(148,163,184,.5);
    }
  </style>
</head>

<body>

  <!-- Fond vid√©o -->
  <video class="site-bg-video" autoplay muted loop playsinline id="rslBg" poster="images/hero-poster.jpg"></video>
  <div class="site-bg-dim" aria-hidden="true"></div>

  <!-- TOP BAR SIMPLE -->
  <header class="topbar">
    <div class="inner">
      <a class="brand" href="index.html">
        <img src="images/logo_rsl.png" alt="Logo RSL"/>
        <span>RSL ‚Äî Partenariats</span>
      </a>

      <div class="actions">
        <button id="themeToggle" class="theme-toggle" aria-label="Changer le th√®me">üåô</button>
        <a class="btn" href="sponsors.html">Voir les sponsors</a>
        <a class="btn green" href="#demande">Faire une demande</a>
        <a class="btn" href="index.html">‚Üê Retour</a>
      </div>
    </div>
  </header>

  <main>
    <div class="wrap">

      <!-- HERO -->
      <section class="hero">
        <div class="hero-grid">
          <div>
            <h1>Devenir partenaire RSL</h1>
            <p class="lead">
              Soutiens la sc√®ne scooter en Suisse romande. Choisis une cat√©gorie (<b>Cours & Formations</b>, <b>Events</b>, <b>Global</b>),
              puis un niveau <b>Bronze / Argent / Gold</b>.
              <br><br>
              Option <b>üî• √âlite</b> = sponsor + <b>Premium Rider</b> (cours gratuits + avantages events).
              <b>Bonus :</b> si tu coches √âlite, l‚Äôabonnement Premium a <b>CHF 100.‚Äì</b> de rabais (490 ‚Üí 390).
            </p>

            <div>
              <span class="pill">Cours & coaching</span>
              <span class="pill">Formations</span>
              <span class="pill">√âv√©nements</span>
              <span class="pill">Visibilit√© site</span>
              <span class="pill">TWINT</span>
            </div>
          </div>

          <div class="mini">
            <div class="mini-card">
              <strong>Simple & clair</strong>
              <span>Tu choisis un pack + option √âlite si tu veux.</span>
            </div>
            <div class="mini-card">
              <strong>Paiement rapide</strong>
              <span>TWINT via QR (charg√© depuis Supabase).</span>
            </div>
            <div class="mini-card">
              <strong>Contact direct</strong>
              <span>Ta demande arrive par Formspree.</span>
            </div>
          </div>
        </div>
      </section>

      <!-- RSL EN BREF -->
      <section class="block">
        <h2>La RSL en 30 secondes</h2>
        <div class="grid3">
          <div class="card">
            <h3>üéØ Mission</h3>
            <ul>
              <li>Faire grandir le scooter freestyle en Romandie</li>
              <li>Encadrer avec un cadre s√©rieux</li>
              <li>Cr√©er des √©v√©nements & rencontres</li>
            </ul>
          </div>
          <div class="card">
            <h3>üõπ Activit√©s</h3>
            <ul>
              <li>Cours r√©guliers (d√©butant ‚Üí avanc√©)</li>
              <li>Formations (s√©curit√© / coaching)</li>
              <li>Events / contests / jams</li>
            </ul>
          </div>
          <div class="card">
            <h3>üìç Audience</h3>
            <ul>
              <li>Riders & familles</li>
              <li>Skateparks en Romandie</li>
              <li>R√©seaux sociaux + pr√©sence terrain</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- OFFRES DYNAMIQUES -->
      <section class="block" id="offres">
        <h2>Offres sponsor</h2>
        <p>
          Choisis la <b>cat√©gorie</b> puis (optionnel) coche <b>üî• √âlite</b> pour inclure le <b>Premium Rider</b>
          avec <b>CHF 100.‚Äì</b> de rabais sur l‚Äôabonnement (490 ‚Üí 390).
        </p>

        <div class="packs-top">
          <div class="controls">
            <div class="select">
              Cat√©gorie :
              <select id="sponsorCategory" aria-label="Cat√©gorie sponsor">
                <option value="cours">Cours & Formations</option>
                <option value="events" selected>Events</option>
                <option value="global">Global (tout)</option>
              </select>
            </div>

            <label class="toggle" title="Ajoute Premium Rider (avec -100 CHF) √† ton pack sponsor">
              <input type="checkbox" id="eliteToggle">
              üî• √âlite (Sponsor + Premium Rider)
            </label>
          </div>

          <a class="btn green" href="#demande">Je veux sponsoriser ‚Üí</a>
        </div>

        <div class="offers" id="sponsorCards"></div>

        <p style="margin-top:10px;color:var(--rsl-muted);font-size:13px;">
          Aussi possible : <b>lots</b>, <b>√©quipement</b>, <b>services</b> (impression, s√©curit√©, boisson, etc.),
          <b>mise √† dispo d‚Äôun lieu</b>, <b>partenariat m√©dia</b>.
        </p>
      </section>

      <!-- TWINT QR -->
      <section class="block" id="twint">
        <h2>Paiement TWINT</h2>
        <p>
          Vous pouvez payer par TWINT en scannant le QR ci-dessous (charg√© depuis Supabase).
Merci d‚Äôindiquer en remarque : ¬´ Sponsor RSL + cat√©gorie + niveau ¬ª.

Si vous choisissez de payer directement via TWINT, merci de remplir ensuite le formulaire en pr√©cisant : la date et l‚Äôheure du paiement, le montant TWINT, ainsi que vos informations de sponsor (cat√©gorie, niveau, option √âlite si applicable). .
          Mets en note : <b>‚ÄúSponsor RSL + cat√©gorie + niveau‚Äù</b>.
        </p>

        <div class="twint">
          <div class="qr-box">
            <img id="twintQr" alt="QR TWINT RSL" src="images/placeholder-qr.png">
          </div>

          <div class="qr-note">
            <h3>Soutenir la RSL (don possible)</h3>
            <p>
              Vous pouvez aussi faire un <b>don libre</b> via TWINT, m√™me sans pack sponsor.
              Chaque montant aide √† financer les cours, la s√©curit√©, et les events.
              <br><br>
              <b>Note conseill√©e :</b> ‚ÄúDon RSL‚Äù.
            </p>

            <div class="don-badge">
              ‚ù§Ô∏è Don libre TWINT = soutien direct √† l‚Äôassociation (mat√©riel, coaching, events)
            </div>

            <div class="qr-actions">
              <a class="btn" href="#demande">Faire une demande</a>
              <a class="btn" href="sponsors.html">Voir les sponsors</a>
            </div>
          </div>
        </div>
      </section>

      <!-- FORM -->
      <section class="block" id="demande">
        <h2>Demande de partenariat</h2>
        <p>
          Remplis √ßa, et on te recontacte. (Envoi via Formspree)
        </p>

        <form id="partnerForm" action="https://formspree.io/f/xykwybvb" method="POST">
          <div class="field">
            <label for="company">Entreprise / marque</label>
            <input id="company" name="company" placeholder="Nom de la marque" required>
          </div>

          <div class="field">
            <label for="name">Ton nom</label>
            <input id="name" name="name" placeholder="Pr√©nom Nom" required>
          </div>

          <div class="field">
            <label for="email">Email</label>
            <input id="email" name="email" type="email" placeholder="contact@..." required>
          </div>

          <div class="field">
            <label for="phone">T√©l√©phone (optionnel)</label>
            <input id="phone" name="phone" placeholder="+41 ...">
          </div>

          <div class="field">
            <label for="category">Cat√©gorie</label>
            <select id="category" name="category" required>
              <option value="">Choisir‚Ä¶</option>
              <option value="cours">Cours & Formations</option>
              <option value="events">Events</option>
              <option value="global">Global (tout)</option>
            </select>
          </div>

          <div class="field">
            <label for="level">Niveau</label>
            <select id="level" name="level" required>
              <option value="">Choisir‚Ä¶</option>
              <option value="bronze">Bronze</option>
              <option value="argent">Argent</option>
              <option value="gold">Gold</option>
            </select>
          </div>

          <div class="field full" style="margin-top:2px;">
            <label style="display:flex;align-items:center;gap:10px;">
              <input type="checkbox" id="eliteFormToggle" style="width:18px;height:18px;cursor:pointer;">
              üî• Ajouter l‚Äôoption √âlite (Sponsor + Premium Rider) ‚Äî Premium √† <b>CHF 390.‚Äì</b> au lieu de 490
            </label>
          </div>

          <div class="field full">
            <label for="message">Message</label>
            <textarea id="message" name="message" placeholder="Dis-nous ce que tu veux (logo, lien, lots, etc.)."></textarea>
          </div>

          <!-- Formspree extras -->
          <input type="hidden" name="_subject" value="[RSL] Demande partenariat">
          <input type="text" name="_gotcha" style="display:none">

          <!-- Hidden computed fields -->
          <input type="hidden" id="eliteHidden" name="elite" value="non">
          <input type="hidden" id="priceHidden" name="prix_estime" value="">
          <input type="hidden" id="packHidden" name="pack" value="">

          <div class="actions-row full">
            <button class="btn-primary" type="submit">Envoyer</button>
            <span class="hint">Apr√®s envoi : tu peux payer par TWINT via le QR plus haut (ou faire un don).</span>
          </div>

          <div id="toast" class="toast full"></div>
        </form>
      </section>

    </div>
  </main>

  <p class="footer">¬© 2026 ‚Äî RSL Romandie Scooter League. Tous droits r√©serv√©s.</p>

  <script>
    // Th√®me (clair / sombre)
    (function(){
      const STORAGE_KEY = 'rsl-theme';
      const body = document.body;
      const btn = document.getElementById('themeToggle');

      function applyTheme(theme){
        if(theme === 'light'){
          body.classList.add('theme-light');
          if(btn) btn.textContent = '‚òÄÔ∏è';
        }else{
          body.classList.remove('theme-light');
          if(btn) btn.textContent = 'üåô';
        }
      }

      let saved = null;
      try{ saved = localStorage.getItem(STORAGE_KEY); }catch(e){}
      if(!saved){
        const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
        saved = prefersLight ? 'light' : 'dark';
      }
      applyTheme(saved);

      if(btn){
        btn.addEventListener('click', ()=>{
          const current = body.classList.contains('theme-light') ? 'light' : 'dark';
          const next = current === 'light' ? 'dark' : 'light';
          applyTheme(next);
          try{ localStorage.setItem(STORAGE_KEY, next); }catch(e){}
        });
      }
    })();

    // Vid√©o de fond
    (function(){
      const vids = [
        "https://jynxifufaauoxwzjapzq.supabase.co/storage/v1/object/public/videos_rsl/trottvideo1.mp4",
        "https://jynxifufaauoxwzjapzq.supabase.co/storage/v1/object/public/videos_rsl/trottvideo2.mp4"
      ];
      const pick = vids[Math.floor(Math.random()*vids.length)];
      const v = document.getElementById('rslBg');
      if(!v) return;

      const s = document.createElement('source');
      s.src = pick;
      s.type = 'video/mp4';
      v.appendChild(s);

      const start = () => {
        try{
          v.playbackRate = 0.6;
          const p = v.play();
          if(p && p.catch) p.catch(()=>{});
        }catch(e){}
      };

      start();
      document.addEventListener('visibilitychange', () => {
        if(document.hidden) v.pause();
        else start();
      });
    })();

    // ‚úÖ QR TWINT depuis Supabase (Storage public) ‚Äî CORRIG√â
    (function(){
      const TWINT_QR_URL = "https://jynxifufaauoxwzjapzq.supabase.co/storage/v1/object/public/twint/qr-twint.png";
      const img = document.getElementById('twintQr');
      if(!img) return;

      img.src = TWINT_QR_URL;

      // fallback si l'image ne charge pas (facultatif)
      img.onerror = () => {
        img.alt = "QR TWINT indisponible (v√©rifie Supabase Storage / acc√®s public)";
      };
    })();

    // ===== Offres + √âlite (AFFICHAGE) =====
    (function(){
      const PREMIUM_PRICE = 490;
      const ELITE_DISCOUNT = 100; // ‚úÖ -100 CHF sur l'abonnement Premium si √âlite
      const PREMIUM_ELITE = PREMIUM_PRICE - ELITE_DISCOUNT;

      const data = {
        events: [
          { level:"Bronze", base:350, tag:"Bronze", featured:false, items:[
            "Logo sur page sponsors (cat√©gorie Events)",
            "Mention sur 1 visuel event (si applicable)",
            "Option lots"
          ]},
          { level:"Argent", base:700, tag:"Argent", featured:false, items:[
            "Logo + lien (events)",
            "Mention sur visuels principaux (si formats)",
            "1 story / event (si possible)"
          ]},
          { level:"Gold", base:1200, tag:"‚≠ê Gold", featured:true, items:[
            "Mise en avant events",
            "Pr√©sence sur visuels + page event",
            "Activation terrain (selon orga)"
          ]},
        ],
        cours: [
          { level:"Bronze", base:250, tag:"Bronze", featured:false, items:[
            "Logo sur page sponsors (cat√©gorie Cours & Formations)",
            "Mention story occasionnelle",
            "Soutien coaching / s√©curit√©"
          ]},
          { level:"Argent", base:500, tag:"Argent", featured:false, items:[
            "Logo + lien (cours/formations)",
            "Mention sur visuels formation (si applicable)",
            "Option lots"
          ]},
          { level:"Gold", base:900, tag:"‚≠ê Gold", featured:true, items:[
            "Mise en avant cours/formations",
            "Pr√©sence sur pages li√©es (cours/formation)",
            "Contenu d√©di√© (si possible)"
          ]},
        ],
        global: [
          { level:"Bronze", base:600, tag:"Bronze", featured:false, items:[
            "Logo site (global) + lien",
            "Mention sur page partenaires",
            "Soutien global RSL"
          ]},
          { level:"Argent", base:1200, tag:"Argent", featured:false, items:[
            "Logo + lien + mise en avant",
            "Contenu r√©gulier (selon planning)",
            "Pr√©sence events si possible"
          ]},
          { level:"Gold", base:2200, tag:"‚≠ê Gold", featured:true, items:[
            "Partenaire principal (global)",
            "Visibilit√© compl√®te site + events + cours",
            "Activation d√©di√©e (selon orga)"
          ]},
        ]
      };

      const eliteBenefits = [
        "Tous les cours gratuits (1 Premium Rider inclus)",
        "‚Äì50% sur events",
        "Suivi avanc√©",
        "T-shirt + Sweat offerts"
      ];

      const select = document.getElementById('sponsorCategory');
      const eliteToggle = document.getElementById('eliteToggle');
      const wrap = document.getElementById('sponsorCards');

      function chf(n){
        return `CHF ${n.toLocaleString('fr-CH')} / an`;
      }

      function render(){
        const key = select.value;
        const elite = !!eliteToggle?.checked;

        wrap.innerHTML = "";
        data[key].forEach(p=>{
          const price = elite ? (p.base + PREMIUM_ELITE) : p.base;

          const el = document.createElement('div');
          el.className = "offer-card" + (p.featured ? " featured" : "");
          el.innerHTML = `
            <span class="tag">${elite ? "üî• √âlite" : p.tag}</span>
            <h4>${p.level}${elite ? " ‚Äî √âlite" : ""}</h4>
            <div class="price">
              ${chf(price)}
              ${elite ? `<small>inclut Premium Rider (+${PREMIUM_ELITE}/an au lieu de ${PREMIUM_PRICE})</small>` : ``}
            </div>
            <ul>
              ${p.items.map(i=>`<li>${i}</li>`).join("")}
              ${elite ? `<li style="margin-top:10px;"><b>Premium Rider inclus :</b></li>` : ""}
              ${elite ? eliteBenefits.map(i=>`<li>${i}</li>`).join("") : ""}
            </ul>
          `;
          wrap.appendChild(el);
        });
      }

      select?.addEventListener('change', render);
      eliteToggle?.addEventListener('change', render);

      select.value = "events";
      render();
    })();

    // ===== Formspree submit + champs cach√©s (pack/prix/elite) =====
    (function(){
      const PREMIUM_PRICE = 490;
      const ELITE_DISCOUNT = 100; // ‚úÖ -100 CHF sur Premium si √âlite
      const PREMIUM_ELITE = PREMIUM_PRICE - ELITE_DISCOUNT;

      const basePrices = {
        events: { bronze:350, argent:700, gold:1200 },
        cours:  { bronze:250, argent:500, gold:900  },
        global: { bronze:600, argent:1200, gold:2200 }
      };

      const form = document.getElementById('partnerForm');
      const toast = document.getElementById('toast');

      const eliteFormToggle = document.getElementById('eliteFormToggle');
      const eliteHidden = document.getElementById('eliteHidden');
      const priceHidden = document.getElementById('priceHidden');
      const packHidden  = document.getElementById('packHidden');

      function showToast(msg, kind="ok"){
        toast.textContent = msg;
        toast.className = "toast full " + (kind === "err" ? "err" : "ok");
        toast.style.display = "block";
        setTimeout(()=>{ toast.style.display = "none"; }, 4500);
      }

      function compute(){
        const cat = form.category?.value;
        const lvl = form.level?.value;
        const elite = !!eliteFormToggle?.checked;

        eliteHidden.value = elite ? "oui" : "non";

        if(!cat || !lvl || !basePrices[cat] || !basePrices[cat][lvl]){
          priceHidden.value = "";
          packHidden.value = "";
          return;
        }

        const base = basePrices[cat][lvl];
        const addon = elite ? PREMIUM_ELITE : 0;
        const total = base + addon;

        priceHidden.value = `CHF ${total} / an`;
        packHidden.value = `${cat} / ${lvl}${elite ? " / elite" : ""}`;
      }

      form.category?.addEventListener('change', compute);
      form.level?.addEventListener('change', compute);
      eliteFormToggle?.addEventListener('change', compute);
      compute();

      form.addEventListener('submit', async (e)=>{
        e.preventDefault();

        const company = form.company?.value?.trim();
        const name = form.name?.value?.trim();
        const email = form.email?.value?.trim();
        const cat = form.category?.value;
        const lvl = form.level?.value;

        if(!company || !name || !email || !cat || !lvl){
          showToast("Merci de remplir: entreprise, nom, email, cat√©gorie et niveau.", "err");
          return;
        }

        compute();

        try{
          const res = await fetch(form.action, {
            method: "POST",
            body: new FormData(form),
            headers: { "Accept": "application/json" }
          });

          if(res.ok){
            showToast("Merci ! Ta demande a bien √©t√© envoy√©e ‚úÖ", "ok");
            form.reset();
            eliteFormToggle.checked = false;
            compute();
          }else{
            showToast("Oups‚Ä¶ envoi impossible. R√©essaie ou contacte-nous directement.", "err");
          }
        }catch(err){
          showToast("Oups‚Ä¶ probl√®me de connexion. R√©essaie dans un moment.", "err");
        }
      });
    })();
  </script>

</body>
</html>
