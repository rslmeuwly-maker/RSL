<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Espace membre ‚Äî Connexion</title>
<style>
    body{background:#f6f8fb;font-family:'Outfit',sans-serif}
    .wrap{max-width:800px;margin:40px auto;padding:0 20px}
    .card{background:#fff;border-radius:16px;padding:30px;box-shadow:0 6px 18px rgba(0,0,0,.08)}
    h1{margin-bottom:4px}
    label{font-weight:600;color:#0f172a;margin:10px 0 4px;display:block}
    input{width:100%;padding:12px;border:1px solid #cbd5e1;border-radius:8px;font-size:1rem}
    input::placeholder{color:#94a3b8}
    .btn{margin-top:20px;display:block;width:100%;padding:14px;border:0;border-radius:8px;background:#16a34a;color:#fff;font-weight:700;font-size:1rem;cursor:pointer}
    .ok,.err{margin-top:12px;padding:10px;border-radius:8px;display:none}
    .ok{background:#ecfdf5;color:#166534;border:1px solid #bbf7d0}
    .err{background:#fef2f2;color:#991b1b;border:1px solid #fecaca}
  /* FOOTER : 3 colonnes + bloc bas √† droite */
  .foot .links-3cols{
    display:grid;grid-template-columns:1fr 1fr 1fr;gap:36px 6vw;align-items:start
  }
  .foot .links-3cols h4{margin:0 0 8px;color:#fff;font-weight:700}
  .foot .links-3cols ul{list-style:none;margin:0;padding:0}
  .foot .links-3cols li{margin:6px 0}
  .foot .links-3cols a{color:#cdd6ff;text-decoration:none}
  .foot .links-3cols a:hover{text-decoration:underline}
  .foot .bottom.bottom-right{
    border-top:1px solid rgba(255,255,255,0.08);
    margin-top:14px;padding:10px 0;display:flex;justify-content:flex-end;gap:14px;align-items:center
  }
  .foot .bottom.bottom-right p{margin:0}
  .foot .bottom.bottom-right a{color:#cdd6ff;text-decoration:none}
  .foot .bottom.bottom-right a:hover{text-decoration:underline}
  @media (max-width:900px){.foot .links-3cols{grid-template-columns:1fr 1fr}}
  @media (max-width:600px){
    .foot .links-3cols{grid-template-columns:1fr}
    .foot .bottom.bottom-right{justify-content:space-between}
  }
</style>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css"/>
<link rel="stylesheet" href="css/common.css"/>
<link rel="stylesheet" href="css/fonts.css"/>
</head>
<body>
<nav class="nav">
  <div class="container nav-inner">
    <a class="brand" href="/">
      <img src="images/logo_rsl.png" alt="Logo RSL">
      <span><b>RSL ‚Äî Romandie Scooter League</b></span>
    </a>
    <ul>
      <li><a href="formation.html">Formation RSL</a></li>
      <li><a href="disciplines.html">Disciplines</a></li>
      <li><a href="ou_rider.html">O√π rider ?</a></li>
      <li><a href="game.html">Games</a></li>
      <li><a href="evenements.html">√âv√©nements</a></li>
      <li><a href="comite.html">Comit√©</a></li>
      <li><a href="contact.html">Contact</a></li>
    
      <li><a href="cours.html">Cours</a></li>
    </ul>
    <div class="cta">
      <button class="btn" id="btnIdentity">Se connecter</button>
      <a class="btn" id="btnAccount" href="#" style="display:none">Mon compte</a>
      <button class="btn dark" id="btnLogout" style="display:none">Se d√©connecter</button>
    </div>
    <div class="cta">
      <a class="btn" id="btnMembre" href="membres.html">Devenir membre</a>
    </div>
  </div>
</nav>

<div class="wrap">
  <div class="card">
    <h1>üîê Espace Membre</h1>
    <p class="muted">Connecte-toi avec ton code membre √† 12 chiffres.</p>

    <label>Nom</label>
    <input id="nom" placeholder="Ton nom">

    <label>Pr√©nom</label>
    <input id="prenom" placeholder="Ton pr√©nom">

    <label>Code membre</label>
    <input id="code" placeholder="4XXXXXXXXXX5" maxlength="12" inputmode="numeric">

    <button class="btn" id="btnEnter">Entrer dans l‚Äôespace membre</button>

    <div class="ok" id="ok">‚úÖ Connexion r√©ussie, redirection...</div>
    <div class="err" id="err">‚ùå Code invalide ou incomplet.</div>
  </div>
</div>

<script>
const MEMBER_RE = /^2\d{10}7$/;
const elNom = document.getElementById("nom");
const elPrenom = document.getElementById("prenom");
const elCode = document.getElementById("code");
const ok = document.getElementById("ok");
const err = document.getElementById("err");

// garder vraie valeur en m√©moire
elCode.dataset.raw = "";

elCode.addEventListener("input", () => {
  elCode.dataset.raw = elCode.value.replace(/\D/g, '').slice(0, 12);
  elCode.value = elCode.dataset.raw;
});

elCode.addEventListener("blur", () => {
  if (elCode.dataset.raw.length === 12) {
    elCode.value = "4" + "X".repeat(10) + "5";
  }
});

elCode.addEventListener("focus", () => {
  elCode.value = elCode.dataset.raw;
});

document.getElementById("btnEnter").addEventListener("click", () => {
  const nom = elNom.value.trim();
  const prenom = elPrenom.value.trim();
  const code = elCode.dataset.raw;

  if (!nom || !prenom) {
    showErr("Merci de remplir tous les champs.");
    return;
  }
  if (!MEMBER_RE.test(code)) {
    showErr("Code membre incorrect.");
    return;
  }

  sessionStorage.setItem("rsl_member_name", `${prenom} ${nom}`);
  sessionStorage.setItem("rsl_member_code", code);
  showOk("Connexion r√©ussie !");
  setTimeout(() => window.location.href = "membre_dash.html", 500);
});

function showOk(msg){ ok.textContent = msg; ok.style.display = "block"; err.style.display = "none"; }
function showErr(msg){ err.textContent = msg; err.style.display = "block"; ok.style.display = "none"; }
</script>

<footer class="foot">
  <div class="container">
    <div class="links links-3cols">
      <div class="col">
        <h4>RSL</h4>
        <ul>
          <li><a href="formation.html">Formation</a></li>
          <li><a href="evenements.html">√âv√©nements</a></li>
          <li><a href="reglement.html">R√®glement</a></li>
        </ul>
      </div>
      <div class="col">
        <h4>Ressources</h4>
        <ul>
          <li><a href="membres.html">Adh√©sion</a></li>
          <li><a href="comite.html">Comit√©</a></li>
          <li><a href="ou_rider.html">O√π rider</a></li>
        </ul>
      </div>
      <div class="col">
        <h4>Contest</h4>
        <ul>
          <li><a href="evenements.html">√âv√©nements</a></li>
          <li><a href="inscriptions.html">Inscriptions</a></li>
          <li><a href="resultats.html">R√©sultats</a></li>
        </ul>
      </div>
    </div>
    <div class="bottom bottom-right">
      <p class="tiny">¬© 2025 ‚Äî Romandie Scooter League</p>
      <p class="tiny"><a href="reglement.html">Conditions g√©n√©rales</a></p>
    </div>
  </div>
</footer>
<script>
(function(){
  function init(){
    var idBtn = document.getElementById('btnIdentity');
    var btnLogout = document.getElementById('btnLogout');
    var btnAccount = document.getElementById('btnAccount');
    function refresh(user){
      var logged = !!user;
      if(idBtn) idBtn.style.display = logged ? 'none' : '';
      if(btnLogout) btnLogout.style.display = logged ? '' : 'none';
      if(btnAccount) btnAccount.style.display = logged ? '' : 'none';
    }
    if(window.netlifyIdentity){
      window.netlifyIdentity.on('init', function(user){ refresh(user); });
      window.netlifyIdentity.on('login', function(user){ refresh(user); window.netlifyIdentity.close(); });
      window.netlifyIdentity.on('logout', function(){ refresh(null); });
      window.netlifyIdentity.init();
    }
    if(idBtn) idBtn.addEventListener('click', function(){ if(window.netlifyIdentity) window.netlifyIdentity.open(); });
    if(btnLogout) btnLogout.addEventListener('click', function(){ if(window.netlifyIdentity) window.netlifyIdentity.logout(); });
    if(btnAccount) btnAccount.addEventListener('click', function(e){ e.preventDefault(); if(window.netlifyIdentity) window.netlifyIdentity.open('settings'); });
  }
  if(document.readyState === 'loading'){ document.addEventListener('DOMContentLoaded', init); } else { init(); }
})();
</script>
<script defer src="js/site.js"></script>
<script defer src="/.netlify/identity-widget.js"></script>
<script defer src="js/auth.js"></script>

<!-- HelpBot (RSL) -->
<link rel="stylesheet" href="css/helpbot.css">
<div id="hb-root">
  <button class="hb-launcher" id="hbOpen" aria-label="Ouvrir l‚Äôaide">üí¨</button>
  <div class="hb-panel" id="hbPanel" role="dialog" aria-modal="true" aria-labelledby="hbTitle">
    <div class="hb-head">
      <div class="title" id="hbTitle">Aide ‚Äî RSL</div>
      <div class="actions">
        <button class="hb-icon-btn" id="hbMin" title="R√©duire">‚ñÅ</button>
        <button class="hb-icon-btn" id="hbClose" title="Fermer">‚úï</button>
      </div>
    </div>
    <div class="hb-body" id="hbBody"></div>
    <div class="hb-foot">
      <input id="hbInput" class="hb-input" type="text" placeholder="Pose ta question‚Ä¶ (ex: prix des cours, remboursement)">
      <button id="hbSend" class="hb-send">Envoyer</button>
    </div>
  </div>
</div>
<script defer src="js/helpbot.js"></script>

</body></html>